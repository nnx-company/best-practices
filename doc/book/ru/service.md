# Сервисы

Сервисы представлюят из себя набор модулей написанных по стандарту zf2. Как правило сервис сосредотачивает в себе
набор бизнес логики по определенному функционалу (контракты, процедуры, оос и т.д.).

## Архитектура

Модули образующие сервис условно можно разделить на две группы. 

- Ядрос сервиса
- Конфигурация сервиса под конкретную информационную систему

Модули образующие ядро сервиса группируются в отдельный вендор. Среди модулей всегда должен быть *один* интеграционный
модуль определяющий версию сервиса, а также его базовые настройки.

Конфигурация сервиса под конкретного заказчика осуществляется через отдельные модули.


## Расположение модулей

Для сервиса заводиться отдельный вендор. Т.е. в каталоге vendor проекта, может быть примерно следующая структура:

```text

project
  vendor
    nnx-contract
    nnx-procedure
    nnx-organization

```

В примере выше, приложение использует 3 разных сервиса
 - контракты
 - процедуры
 - организации
 
 Конфигурация сервиса под конкретного заказчика выполняется в виде отдельного модуля распологающегося в каталоге 
 предназначенном для модулей закачзика.

```text

project
  vendor
    nnx-contract
      contract
      contract-core
      contract-execution-223
      contract-api
    customer-vendor
      contract
```

В приведенном выше примере, проект представляет из себя сервис для работы с контрактами. Основной набор модулей
располагается в директории *nnx-contract*, а настройка сервиса контрактов под конкретного заказчика в модуле *contract*
расположенным в каталоге *customer-vendor*.

*Важно*: конфигурация сервиса выносится в отдельный модуль расположенный на уровне вендоров. Распологать конфигурационный
модуль на уровне приложений *не рекомендуюется*.

### Сервисы, уровень вендора, уровень приложения

При разработке учитываем что должна быть возможность тестировать сервис вне контекста приложения. Таким образом, код
который имеет отношению к сервису *недопустимо выносить на уровень приложения*. В противном случаем теряется возможность
написания тестов для конкретного сервиса, а также получается связь сервиса с конкретным приложением.


## Версионность

Сервисы имеют свои версии. У каждого сервиса должен быть интеграционный модуль, объеденяющий во едино все используемые 
модули. Также в данном модуле происходит базовая настройка сервиса.

```text

project
  vendor
    nnx-contract
      contract(v1.0)
      contract-core(v0.4)
      contract-execution-223(v0.4)
      contract-api(v0.4)
    customer-vendor
      contract(v1.1)
      contract-custom-feature(v1.0)
```

В примере выше интеграционным модулем является модуль nnx-contract/contract. Именно этот модуль определяет версию сервиса.

Модуль customer-vendor/contract - подключает через composer.json модуль nnx-contract/contract. Именно в этом модуле
содержаться настройки под конкретного заказчика, а также функционал расширающий базовый возможности сервиса. Допустимо
создание отдельных модулей, реализующий функционал специфичный для конкретного заказчика, и расширяющий возможности сервиса.
В примере выше таким модулем является customer-vendor/contract-custom-feature




